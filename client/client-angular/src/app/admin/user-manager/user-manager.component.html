<div class="row">
    <div class="col s8" [ngClass]="{'offset-s2' : !this.editeMode}">
        <div class="card horizontal z-depth-4" *ngFor="let user of users">
            <div class="card-image col s4">
                <img src="{{user.image || 'https://cdn.dribbble.com/users/219762/screenshots/2351573/saitama.png'}}" class="user-image">
                <button 
                (click)="selectUser(user)"
                class="btn edite-btn rework-btn">
                    <i class="material-icons">edite</i>
                </button>
                <button 
                (click)="deleteUser(user._id)"
                class="btn delete-btn rework-btn">
                    <i class="material-icons">delete</i>
                </button>
            </div>
            <div class="card-stacked col s8">
                <div class="card-content">
                    <div class="card-title">
                        <b>{{user.name}}</b>
                        <br>
                        <span><small>({{(user.role === 1) ? 'admin' : 'user'}})</small></span>
                    </div>
                    <p><b>E-mail: </b>{{user.email}}</p>
                    <ul> 
                        <span><b>List of books:</b></span>
                        <li *ngFor="let book of user.book_list">{{book.title}}</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>  
    <form class="col s4" [formGroup]="form" (ngSubmit)="onSubmit()" *ngIf="this.editeMode">
        <hr>
        <div class="input-field">
            <input type="text" id="name" 
            [(ngModel)]='userForEdite.name'
            formControlName='name'
            >
            <label for="name" [ngClass]="{active: userForEdite.name}">Name</label>
        </div>
        <div class="input-field">
            <input type="text" id="email" 
            [(ngModel)]="userForEdite.email"
            formControlName='email'
            >
            <label for="email" [ngClass]="{active: userForEdite.email}">E-mail</label>
        </div>
        <!-- <div class="input-field">
            <input type="text" id="password" 
            [(ngModel)]="userForEdite.password"
            formControlName='password'
            >
            <label for="password" [ngClass]="{active: userForEdite.password}">Password</label>
        </div> -->
        <div class="input-field">
            <input type="number" id="role" 
            min="1"
            max="2"
            [(ngModel)]="userForEdite.role"
            formControlName='role'
            >
            <label for="role" [ngClass]="{active: userForEdite.role}">Role</label>
        </div>
        <div class="input-field">
            <input type="text" id="id" [(ngModel)]="userForEdite._id" [ngModelOptions]="{standalone: true}" >
            <label for="id" [ngClass]="{active: userForEdite._id}">id</label>
        </div>
        <div class="input-field">
            <label for="image">Image</label>
            <input type="file" id="preview" [(ngModel)]="userForEdite.image" [ngModelOptions]="{standalone: true}" (onChange)="uploadFile($event)">
            <img [src]="this.userForEdite.image" alt="user avatar">
<!-- 
            <label for="image" class="active" [ngClass]="{alredy: this.editeBookData.image}">Click for change image</label>
            <input type="file" name="image" id="preview" [ngModelOptions]="{standalone: true}" (onChange)="uploadFile($event)">
            <img [src]="this.userForEdite.image" alt="user avatar" id="preview"> -->
        </div>
        <div class="container center">
            <button type="button" class="btn waves-effect" 
                (click)="addAction()" *ngIf="!okBtnStatus"
                [disabled]="form.invalid"
                >Add
            </button>
            <button type="button" class="btn waves-effect" 
                (click)="okAction()" *ngIf="okBtnStatus"
                [disabled]="form.invalid"
                >OK
            </button>
        </div>
    </form>
</div>